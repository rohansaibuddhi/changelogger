# Changelogger 🤖

AI-powered changelog generator with intelligent documentation drift detection for GitHub repositories.

## ✨ Features

- **🚀 Smart Changelog Generation**: Uses OpenAI GPT-4 to create human-readable changelogs from PRs
- **📊 Multi-Merge Strategy Support**: Handles squash, rebase, and merge commits intelligently
- **📚 AI-Powered Drift Detection**: Detects when documentation needs updating based on code changes
- **⚠️ Breaking Change Detection**: Automatically identifies and flags breaking changes
- **💡 Actionable Suggestions**: Provides specific recommendations for documentation updates
- **🔧 Single API Integration**: Simplified architecture with just OpenAI (no multiple API keys needed)
- **⚡ Fast & Reliable**: Built with TypeScript and optimized for performance

## 🆚 vs git-cliff

Unlike git-cliff which only supports squash commits, Changelogger:
- ✅ Works with **all merge strategies** (squash, rebase, merge)
- ✅ Uses **AI** to understand context and generate meaningful descriptions
- ✅ **Detects documentation drift** automatically with intelligent analysis
- ✅ **Identifies breaking changes** and suggests migration docs
- ✅ Handles **complex PR patterns** and multi-commit workflows
- ✅ **Single API** simplicity (just OpenAI) vs multiple integrations
- ✅ **Actionable insights** beyond just changelog generation

## 🚀 Quick Start

### 1. Set up GitHub Action

Create `.github/workflows/changelog.yml`:

```yaml
name: Generate Changelog

on:
  release:
    types: [created]
  workflow_dispatch:
    inputs:
      since:
        description: 'Generate changelog since (date or tag)'
        required: false

jobs:
  changelog:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pull-requests: read

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Generate Changelog
        uses: rohansaibuddhi/changelogger@v0.1.0
        with:
          openai_api_key: ${{ secrets.OPENAI_API_KEY }}
          merge_strategy: auto
          since: ${{ github.event.inputs.since }}
```

### 2. Add Required Secret

In your repository settings, add:
- `OPENAI_API_KEY`: Your OpenAI API key from [platform.openai.com](https://platform.openai.com/api-keys)

### 3. Run the Action

The action will:
1. 🔍 Collect PRs since last release (auto-detecting merge strategies)
2. 🤖 Generate comprehensive changelog with OpenAI GPT-4
3. 📚 Analyze documentation drift and breaking changes
4. 💡 Provide actionable suggestions for docs
5. ✍️ Update `CHANGELOG.md` with results

## ⚙️ Configuration

### Action Inputs

| Input | Description | Required | Default |
|-------|-------------|----------|---------|
| `openai_api_key` | OpenAI API key for changelog generation | ✅ | - |
| `merge_strategy` | How PRs are merged: `auto`\\|`squash`\\|`rebase`\\|`merge` | ❌ | `auto` |
| `since` | Generate changelog since this date/tag | ❌ | Last release |
| `github_token` | GitHub token for API access | ❌ | `${{ github.token }}` |

### Action Outputs

| Output | Description |
|--------|-------------|
| `changelog` | Generated changelog content with drift analysis |
| `drift_warnings` | Documentation drift warnings (detected by AI) |

## 📝 Example Output

```markdown
# Changelog

## [Unreleased] - 2024-01-15

### 🚀 Features

- Add user authentication with OAuth2 support (#123)
- Implement real-time notifications system (#124)

### 🐛 Bug Fixes

- Fix memory leak in data processing pipeline (#125)
- Resolve race condition in user session management (#126)

### 📚 Documentation

- Update API documentation with new endpoints (#127)

### ⚠️ Documentation Drift Detected

- 2 PRs contain code changes but no documentation updates were found
- 1 PRs appear to modify APIs - documentation may need updates

### Suggestions:

- Update API documentation and examples to reflect API changes
- Consider updating README.md or documentation to reflect new features and changes

---
*Generated by [Changelogger](https://github.com/rohansaibuddhi/changelogger) 🤖*
```

## 🔧 How It Works

### 1. PR Collection
Changelogger automatically detects your merge strategy:
- **Squash**: Uses PR title and description
- **Rebase**: Analyzes individual commits
- **Merge**: Processes entire branch history

### 2. AI-Powered Generation
- Sends context to OpenAI GPT-4
- Categorizes changes (features, fixes, docs, breaking)
- Generates human-readable descriptions
- Includes PR numbers and authors

### 3. Documentation Drift Detection
- Analyzes code changes vs documentation updates
- Detects API modifications without doc updates
- Identifies breaking changes needing migration guides
- Suggests improvements

## 🧪 Development

### Local Testing

```bash
# Clone the repository
git clone https://github.com/rohansaibuddhi/changelogger.git
cd changelogger

# Install dependencies
npm install

# Set environment variables
export OPENAI_API_KEY="your-openai-key"
export GITHUB_TOKEN="your-github-token"

# Build
npm run build

# Test locally
npm run start
```

### Building for Production

```bash
# Compile TypeScript and package for GitHub Actions
npm run package

# The dist/ folder contains the packaged action
```

## 📄 License

MIT License - see [LICENSE](LICENSE) for details.

## 🤝 Contributing

Contributions welcome! Please read our [Contributing Guide](CONTRIBUTING.md).

## 🔗 Links

- [OpenAI API](https://platform.openai.com/)
- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [OpenAI API Keys](https://platform.openai.com/api-keys)

---

Made with ❤️ by [Rohan Sai Buddhi](https://github.com/rohansaibuddhi)